import { prisma } from "@/lib/prisma"; import Link from "next/link"; export const dynamic="force-dynamic";
async function getOrders(){ return await prisma.order.findMany({ orderBy:{ createdAt:"desc" } }); }
export default async function AdminPage(){ const orders=await getOrders(); return (<div className="space-y-6"><h1 className="text-2xl font-bold">Orders</h1><div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">{orders.map(o=> (<div key={o.id} className="border rounded-2xl bg-white shadow-sm p-4"><div className="text-sm text-gray-500">{o.createdAt.toISOString()}</div><div className="font-semibold">{o.email}</div><div className="text-sm">{o.sheetWidth}×{o.sheetHeight}" @ {o.dpi} DPI</div><div className="text-sm">Area: {o.sqFt.toFixed(2)} sq ft</div><div className="text-sm">Amount: ${Number(o.amount).toFixed(2)}</div><div className="text-sm">Status: <span className="font-medium">{o.status}</span></div><div className="flex gap-2 mt-3"><a className="px-3 py-1 border rounded-xl text-sm" href={`https://s3.console.aws.amazon.com/s3/object/${process.env.AWS_S3_BUCKET}/${o.s3Key}`} target="_blank">Artwork</a><Link className="px-3 py-1 border rounded-xl text-sm" href={`/admin/${o.id}`}>Details</Link></div></div>))}</div></div>); }
